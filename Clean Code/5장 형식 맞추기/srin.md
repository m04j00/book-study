# 5장 형식 맞추기

> 프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다.
> 

> 코드 형식을 맞추기 위한 간단한 규칙을 정하고 그 규칙을 착실히 따라야 한다.
> 

그래서 실제 회사에서도 코드 컨벤션을 통해 팀간, 회사 내 코드 규칙을 정하고 이와 함께 규칙과 관련된 코드 리뷰도 함께 진행하는 것을 꺠닫게 되었다.
 
<br>
 
## 형식을 맞추는 목적

> 코드 형식은 **중요하다!** 너무 중요해서 무시하기 어렵다.
> 

> 코드 형식은 의사소통의 일환이다. 의사소통은 전문 개발자의 일차적인 의무다.
> 

> 오랜 시간이 지나 원래 코드의 흔적을 더 이상 찾아보기 어려울 정도로 코드가 바뀌어도 맨 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 계속 영향을 미친다.
> 
 
<br>
 
## 적절한 행 길이를 유지하라

> 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.
> 
 
<br>
 
*신문 기사처럼 작성하라*

> 이름은 간단하면서도 설명이 가능하게 짓는다
> 

> 소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명한다. 아래로 내려갈수록 의도를 세세하게 묘사한다. 마지막에는 가장 저차원 함수와 세부 내역이 나온다.
> 
 
<br>
 
*개념은 빈 행으로 분리하라*

> 각 행은 수식이나 절을 나타내고, 일련의 행 묶음은 완결된 생각 하나를 표현한다. 생각 사이는 빈 행을 넣어 분리해야 마땅하다.
> 
 
<br>
 
*세로 밀집도*

> 줄바꿈이 개념을 분리한다면 세로 밀집도는 연관성을 의미한다. 즉, 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다는 뜻이다.
> 
 
<br>
 
*수직 거리*

> 서로 밀접한 개념은 세로로 가까이 둬야 한다.
                                ⁝
서로 밀접한 개념은 한 파일에 속해야 마땅하다.
> 

> 여기서 연관성이란 한 개념을 이해하는 데 다른 개념이 중요한 정도다.
> 

> 연관성이 깊은 두 개념이 멀리 떨어져 있으면 코드를 읽는 사람이 소스 파일과 클래스를 여기저기 뒤지게 된다.
> 
1. **변수선언**
    
    > 변수는 사용하는 위치에 최대한 가까이 선언한다.
    > 
2. **인스턴스 변수**
    
    > 반면 인스턴스 변수는 클래스 맨 처음에 선언한다. 변수 간에 세로로 거리를 두지 않는다.
    > 
    
    > 잘 설계한 클래스는 많은 (혹은 대다수) 클래스 메서드가 인스턴스 변수를 사용하기 때문이다.
    > 
3. **종속 함수**
    
    > 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다. 또한 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다.
    > 
    
    ```java
    //호출하는 함수
    public String getUserInfo(String userId){
    	User user = getUser(userId);
    	return user.getInfo();
    }
    
    //호출되는 함수
    public User getUser(String userId){
    	return new User("user's info");
    }
    ```
    
4. **개념적 유사성**
    
    > 친화도가 높을수록 코드를 가까이 배치한다.
    > 
    
    개념적 유사성(친화도)란 코드간 직접적으로 호출하는 종속성도 예이지만 비슷한 동작을 수행하는 코드들도 친화도가 높다고 할 수 있다.
    
 
<br>
 
*세로 순서*

> 일반적으로 함수 호출 종속성은 아래 방향으로 유지한다. 다시 말해, 호출되는 함수를 호출하는 함수보다 나중에 배치한다.(3번 종속함수 코드 참고)
> 

> 그러면 소스 코드 모듈이 고차원에서 저차원으로 자연스럽게 내려간다.
> 
 
<br>
 
## 가로 형식 맞추기

> 프로그래머는 명백하게 짧은 행을 선호한다. 그러므로 짧은 행이 바람직하다.
> 

> 개인적으로는 120자 정도로 행 길이를 제한한다.
> 
 
<br>
 
*가로 공백과 밀집도*

> 가로로는 공백을 사용해 밀접한 개념과 느슨한 개념을 표현한다.
> 

> 공백을 넣으면 두 가지 주요 요소가 확실히 나뉜다는 사실이 더욱 분면해진다.
> 

> 연산자 우선순위를 강조하기 위해서도 공백을 사용한다.
> 
 
<br>
 
*가로 정렬*

> 정렬이 필요할 정도로 목록이 길다면 문제는 목록 길이지 정렬 부족이 아니다.
> 
 
<br>
 
*들여쓰기*

> 소스 파일은 윤곽도와 계층이 비슷하다.
> 

> 범위로 이뤄진 계층을 표현하기 위해 우리는 코드를 들여쓴다. 들여쓰는 정도는 계층에서 코드가 자리잡은 수준에 비례한다.
> 
- 들여쓰기 무시하기
    
    > 간단한 if문, 짧은 while문, 짧은 함수에서 들여쓰기 규칙을 무시하고픈 유혹이 생긴다. 이런 유혹에 빠질 떄마다 나는 항상 원점으로 돌아가 들여쓰기를 넣는다.
    > 
 
<br>
 
*가짜 범위*

> 떄로는 빈 while문이나 for문을 접한다. 나느 이런 구조를 좋하지 않기에 가능한 한 피하려 애쓴다.
> 
 
<br>
 
## 팀 규칙

> 프로그래머라면 각자 선호하는 규칙이 있다. 하지만 팀에 속한다면 자신이 선호해야 할 규칙은 바로 팀 규칙이다.
> 

> 팀은 한 가지 규칙에 합의해야 한다. 그리고 모든 팀원은 그 규칙을 따라야 한다. 그래야 소프트웨어가 일관적인 스타일을 보인다.
> 

> 좋은 소프트웨어 시스템은 읽기 쉬운 문서로 이뤄진다는 사실을 기억하기 바란다. 스타일을 일관적이고 매끄러워야 한다.
> 
 
<br>
 
## 밥 아저씨의 형식 규칙

<해당 부분은 저자가 사용하는 형식 규칙을 코드로 나타내고 있다>
 
<br>
 
## 느낀점

처음 회사에 갔을때 가장 회사에서 가장 처음 알려주셨던 부분을 생각해보면 팀 내 코드 컨벤션과 관련된 문서였던것 같다. 학교에 있을때까지만 해도 각 친구들별 코드 스타일이 어떻든 코드가 잘 돌아가기만 하면 된다는 생각이 컸었고, 그로 인해 각각의 파일이 따로 노는 듯한 느낌이 들기도 했었다. 작가마다 글 쓰는 방식이 다르고 종결 어미를 처리하는 방식이 다 다르듯이 개발자 또한 코드를 작성하는 방법과 형식에 있어 다 다르다는 것을 그땐 인지하지 못했던것 같다. 이제와서 그 코드를 보면 각자 메서드명부터 테스트코드 작성법까지 다른 형식으로 작성되었었다는 것을 확인할 수 있을 것이다. 이렇게코드 형식에 대한 중요성을 다시금 깨닫는다. 내가 학교에서 작성했던 코드와는 달리 회사의 코드를 보면 분명 작성자가 다 다름에도 불구하고 대부분이 비슷한 코드 형식을 가지고 있다는 것을 알 수 있었다(정말 코드 하나하나가 돌아가는 방식까지도 비슷하게 구현한 부분도 있었다.) 그랬을때 확실히 다른 코드임에도 불구하고 조금더 쉽게 내용을 파악하고 이해할 수 있었던 경험이 있기에 이번 주제가 매우 와닿았다. 팀 내 코드 컨벤션을 왜 따라야만 하는지, 어떻게 해야 더 깔끔한 형식의 코드를 짤 수 있는지에 관한 저자의 생각을 들어보았으니 나의 생각도 한번 정리해보아야겠다고 생각했다.
